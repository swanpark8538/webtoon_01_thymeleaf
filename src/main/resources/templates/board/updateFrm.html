<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>게시판</title>
</head>
<body>
	<h2>게시글 수정</h2>
	<form action="/board/update" id="updateFrm" method="post" enctype="multipart/form-data">
		<table border="1">
			<tbody>
				<tr>
					<th>제목</th>
					<td>
						<input type="text" name="boardTitle" th:value="${board.boardTitle}">
						<input type="hidden" name="boardNo" th:value="${board.boardNo}">
					</td>
				</tr>
				<tr>
					<th>작성자</th>
					<td>
						<input type="text" th:value="${board.boardWriter}" name="boardWriter" readonly>
					</td>
				</tr>
				<tr>
					<th>기존 첨부파일</th>
					<td>
						<ul th:each="file : ${board.fileList}">
							<li>
								<span th:text="${file.filename}"></span>
								<button type="button" th:onclick="delFile(this, [[${file.boardFileNo}]]);">삭제</button>
							</li>
						</ul>
					</td>
				</tr>
				<tr>
					<th>첨부파일 추가</th>
					<td>
						<input type="file" multiple="multiple" name="upfile">
					</td>
				</tr>
				<tr>
					<th>내용</th>
					<td>
						<textarea name="boardContent" th:text="${board.boardContent}"></textarea>
					</td>
				</tr>
				<tr>
					<td colspan="2">
						<button type="submit">수정완료</button>
					</td>
				</tr>
			</tbody>
		</table>
	</form>
	<a href="/board/boardList?reqPage=1">목록</a>
<script th:inline="javascript">
	const delFile = (obj, boardFileNo) => {
	    const delFileInput = document.createElement("input");
	    delFileInput.setAttribute("type", "hidden");
	    delFileInput.setAttribute("name", "delFileNo");
	    delFileInput.value = boardFileNo;
	    document.querySelector("#updateFrm").appendChild(delFileInput);
	    obj.parentElement.remove();
	}
</script>
</body>
</html>